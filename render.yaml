services:
  # The API Server
  - type: web
    name: logflow-api
    env: docker
    dockerfilePath: Dockerfile
    plan: free
    envVars:
      - key: DATABASE_URL
        sync: false
      - key: GEMINI_API_KEY
        sync: false

  # The Log Generator Agent (Running as Web Service for Free Tier)
  # It includes a dummy HTTP listener to satisfy Render's port binding requirement
  - type: web
    name: logflow-agent
    env: docker
    dockerfilePath: Dockerfile.agent
    plan: free
    envVars:
      - key: SERVER_URL
        fromService:
          type: web
          name: logflow-api
          property: host
